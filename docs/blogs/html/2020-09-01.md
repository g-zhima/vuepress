---
title: HTML5标签嵌套的问题
date: 2020-09-01 15:56:48
tags: HTML
---

# HTML5标签嵌套的问题

一直认为 HTML 标签嵌套的问题很简单,直到有同学问我 `<p>` 标签和 `<div>` 标签嵌套的问题后，我才发现原来标签嵌套也有这么多的细节，这篇博客就总结一下查到的东西。

首先是之前一直学的嵌套规则：
- 块级元素可以嵌套块级元素和行内元素。
- 行内元素可以嵌套行内元素但不能嵌套块级元素。

乍一看没什么问题，但实际网页中似乎有违背这些规则的情况出现。

首先是同为块级元素的 `<p>` 标签和 `<div>` 标签嵌套问题，在 `<p>` 中嵌套 `<div>` 没有违背嵌套规则，但在浏览器解析时会出现严重的问题：会直接将 `<div>` 标签包裹在两个 `<p>` 标签之间。这没有合适的解释，大家都按特殊规则进行记忆。

另一个情况就是会经常看到 `<a>` 标签中嵌套 `<div>` 等块级标签，这显然也违背了行内元素不能嵌套块级标签的规则，但事实上很多网站都用了这样的规则。

于是，有事上 google，我发现之前学过的嵌套规则其实属于淘汰后的规则，新的 HTML5 嵌套规则有了很大的区别。

之前的规则把元素分成了块级和行内级，这其实是基于 CSS 样式的分类方式，而 HTML5 新的规范其实一直想强调语义并弱化样式，这样有助于结构和样式的分离，这在 HTML5 中删除了许多定义样式的标签和属性，新增了无样式的语义标签也可以看出。

那新的嵌套规则是什么呢？且听我慢慢道来~~

在新的规范中，标签最常见的有 7 类，并且每种标签可以有多个类型。

- 元数据内容（Metadata content）
- 流式元素（Flow content）
- 章节元素（Sectioning content）
- 标题元素（Heading content）
- 短语/段落元素（Phrasing content）
- 嵌入元素（Embedded content）
- 交互元素（Interactive content）

具体每个分类中有哪些标签，我就懒得写了，丢个 [MDN](https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/Content_categories) 链接自行查找。

可以看出新规范的分类方法更加重视了语义，这与 HTML 本身要表达的意思也更符合。每种分类都有相对应的嵌套规则，下面来看几个代表性强的例子：

首先是 `<p>` 标签，查看 MDN 可知它属于 Flow content，palpable content。它接受的内容为 Phrasing content。而 Phrasing content 中并没有 `<div>` 标签，所以按规则 `<p>` 标签是不能嵌套 `<div>` 标签的。

然后看看 `<div>` 标签，它允许的子元素是 Flow content，而流式元素基本涵括了页面中的大部分元素，所以我们在用 `<div>` 时可以不用担心嵌套错误的问题。

那 `<a>` 标签呢？它稍微特殊一点，它允许的子元素中有个 Transparent，所以它接受的子元素是以它父元素接受的元素为准的，但不能包含交互式元素。所以在新规范下就很明确了，`<a>` 标签是可以嵌套 `<div>` 标签的，只要 `<a>` 标签的父元素可以嵌套 `<div>` 就行。

最后，我们可以把嵌套规则分成：严格嵌套约束、语义嵌套约束。严格的嵌套约束是必须遵守的，不然会导致浏览器的解析错误，比如 `<p>` 标签中嵌套 `<div>` 标签，`<a>` 标签中嵌套 `<a>`标签。语义嵌套相对没那么严格，浏览器也会正确解析，但在实际开发还是要尽量遵守，保证语义正确。
